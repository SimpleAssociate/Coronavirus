import yfinance as yf
from yahoofinancials import YahooFinancials
import numexpr as ne
import pandas as pd
import numpy as np
from matplotlib import pyplot as plt
from sklearn.linear_model import LinearRegression
from sklearn.model_selection import train_test_split


cases = [27,
27,
27,
44,
44,
59,
59,
59,
59,
59,
59,
59,
59,
60,
60,
61,
61,
66,
83,
219,
239,
392,
534,
631,
897,
1350,
2023,
2820,
4587,
6067,
7823,
9826,
11946,
14554,
17372,
20615,
24522,
28273,
31491,
34933,
37552,
40540,
43105,
45177,
60328,
64543,
67103,
69265,
71332,
73327,
75191,
75723,
76719,
77804,
78812,
79339,
80132,
80997,
82106,
83375,
85223,
87042,
89121,
90943,
93193,
95464,
98442,
102524,
106488,
110633,
115331,
120250,
127785,
136806,
146675,
158808,
171165,
184905,
201363,
221172,
251542,
282895,
316942,
350942,
393837,
434723,
486947,
547297,
611632,
674897,
732707,
796268,
868867,
945624,
1022366,
1103314,
1188306,
1257241,
1329576,
1404566,
1489045,
1574850,
1664170,
1744940,
1816194,
1882211,
1958813,
2038561,
2121523,
2203417,
2283158,
2355301,
2431261,
2516991,
2583279,
2660713,
2734478,
2835026,
2918082,
2983864,
3055429,
3133235,
3217821,
3309563,
3390732,
3469241,
3546407,
3625591,
3715415,
3809600,
3899742,
3989897,
4066886,
4137916,
4223703,
4309653,
4406318,
4504351,
4598547,
4679764,
4766900,
4861975,
4961338,
5069262,
5175836,
5276942,
5371158,
5460254,
5556124,
5658707,
5777512,
5900530,
6028326,
6136294,
6236775,
6349294,
6475978,
6603640,
6737150,
6863012,
6979330,
7085181,
7210775,
7344237,
7481814,
7626278,
7760355,
7882521,
8001213,
8142518,
8318948,
8457640,
8634891,
8796835,
8926614,
9063414,
9229049]

deaths = [
    0,
0,
0,
0,
0,
0,
0,
0,
0,
0,
0,
1,
1,
1,
1,
2,
2,
2,
2,
3,
3,
6,
17,
17,
26,
41,
56,
81,
106,
132,
170,
213,
259,
305,
362,
427,
493,
565,
638,
724,
813,
910,
1018,
1115,
1370,
1383,
1527,
1669,
1775,
1873,
2012,
2128,
2247,
2359,
2463,
2619,
2698,
2762,
2800,
2857,
2921,
2979,
3046,
3118,
3202,
3282,
3384,
3488,
3585,
3813,
4021,
4293,
4619,
4968,
5407,
5768,
6514,
7112,
7912,
8854,
9897,
11266,
12966,
14607,
16387,
18651,
21224,
23973,
27395,
30888,
34017,
37911,
42540,
47447,
52403,
59034,
65179,
69854,
75120,
82783,
89219,
96664,
103885,
109911,
115177,
120548,
128152,
138672,
147381,
155949,
162442,
167478,
172814,
180098,
186201,
193645,
199077,
205323,
209251,
214141,
220659,
227330,
232864,
238704,
243469,
247155,
251154,
257103,
263489,
269235,
274501,
278941,
282351,
285921,
291697,
296884,
302254,
307425,
311693,
314666,
317928,
323156,
327957,
333399,
338089,
342078,
342894,
346277,
350213,
355389,
360090,
364894,
368944,
371854,
375431,
380085,
385737,
390926,
395710,
399532,
403036,
406266,
411195,
416434,
421196,
425930,
430130,
433259,
436633,
443484,
448734,
455060,
460083,
464292,
468257,
471681,
477269]

cases_test = cases[:150]
data = []
for i in range(0,150):
    data.append(i)

########
testset = pd.DataFrame({
    'data' : data
})

X = testset[['data']].values
model = LinearRegression()
model.fit(X, cases_test)


coronaP = []
corona_true = []
for i in range(150,177):
    prediction = model.predict([[i]])
    coronaP.append(prediction[0])
    corona_true.append(cases[i])

plt.plot(coronaP)
plt.plot(corona_true)
plt.show()








